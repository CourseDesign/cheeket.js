"use strict";(self.webpackChunkcheeket_document=self.webpackChunkcheeket_document||[]).push([[244],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),l=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=l(t),m=o,g=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return t?r.createElement(g,c(c({ref:n},p),{},{components:t})):r.createElement(g,c({ref:n},p))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,c=new Array(a);c[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var l=2;l<a;l++)c[l]=t[l];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5064:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return u}});var r=t(7462),o=t(3366),a=(t(7294),t(3905)),c=["components"],i={sidebar_position:1},s="Container",l={unversionedId:"cheeket/container",id:"cheeket/container",title:"Container",description:"Containers are managers that manage the creation and lifecycle of objects.",source:"@site/docs/cheeket/container.md",sourceDirName:"cheeket",slug:"/cheeket/container",permalink:"/cheeket.js/docs/cheeket/container",editUrl:"https://github.com/siyual-park/cheeket.js/tree/main/documents/cheeket-document/docs/cheeket/container.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/cheeket.js/docs/intro"},next:{title:"Context",permalink:"/cheeket.js/docs/cheeket/context"}},p={},u=[],d={toc:u};function m(e){var n=e.components,t=(0,o.Z)(e,c);return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"container"},"Container"),(0,a.kt)("p",null,"Containers are managers that manage the creation and lifecycle of objects.  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Container } from "cheeket";\n\nconst container = new Container();\n')),(0,a.kt)("p",null,"A container has a token, which is the key to resolving an object, and a set of middleware that knows how to create it.\nBy registering tokens and middleware with the container, the container can resolve objects."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const LoggerToken = Symbol('Logger') as Token<Logger>;\n\ncontainer.register(LoggerToken, (context) => {\n  context.response = (message) => {\n    console.log(message);\n  };\n});\n")),(0,a.kt)("p",null,"Middleware is executed in the order in which it was registered. If you need complex processing to resolve objects, please register additional middleware."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const LoggersToken = Symbol('Logger[]') as Token<Logger[]>;\n\ncontainer.register(LoggersToken, async (context, next) => {\n  if (context.response === undefined) {\n    context.response = [];\n  }\n  context.response.push((message) => {\n    console.log(message);\n  });\n  \n  await next();\n});\n\ncontainer.register(LoggersToken, async (context, next) => {\n  if (context.response === undefined) {\n    context.response = [];\n  }\n  context.response.push((message) => {\n    console.warn(message);\n  });\n\n  await next();\n});\n")),(0,a.kt)("p",null,"You can add middleware to handle all requests, not just middleware for specific tokens"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"container.use(async (context, next) => {\n  console.log(JSON.stringify(context));\n  await next();\n});\n")),(0,a.kt)("p",null,"A container is also an event emitter. This event emitter has an interface similar to nodejs's event emitter, but responds to Promises.\nYou can manage the life cycle of an object through events.\nAll actions to manage objects are performed through middleware and events"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { InternalEvents } from 'cheeket'\nimport container from \"cheeket/dist/container\";\n\ncontainer.on(InternalEvents.PreClear, async (value) => {\n  if (value === container) { // when clear container\n    // TODO\n  }\n});\n")),(0,a.kt)("p",null,"Containers can create new containers that contain their own middleware but are isolated by creating their own child containers."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const child = container.child();\n")))}m.isMDXComponent=!0}}]);