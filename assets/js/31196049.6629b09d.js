"use strict";(self.webpackChunkcheeket_document=self.webpackChunkcheeket_document||[]).push([[512],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),l=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),h=a,f=d["".concat(i,".").concat(h)]||d[h]||u[h]||o;return n?r.createElement(f,c(c({ref:t},p),{},{components:n})):r.createElement(f,c({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,c[1]=s;for(var l=2;l<o;l++)c[l]=n[l];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},341:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),c=["components"],s={sidebar_position:4},i="Event",l={unversionedId:"cheeket/event",id:"cheeket/event",title:"Event",description:"Event provides a way to communicate with middleware.",source:"@site/docs/cheeket/event.md",sourceDirName:"cheeket",slug:"/cheeket/event",permalink:"/cheeket.js/docs/cheeket/event",editUrl:"https://github.com/siyual-park/cheeket.js/tree/main/documents/cheeket-document/docs/cheeket/event.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Middleware",permalink:"/cheeket.js/docs/cheeket/middleware"},next:{title:"Scope",permalink:"/cheeket.js/docs/cheeket/scope"}},p={},u=[],d={toc:u};function h(e){var t=e.components,n=(0,a.Z)(e,c);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"event"},"Event"),(0,o.kt)("p",null,"Event provides a way to communicate with middleware.\nThe events used internally by cheket are as follows.\nEvents that begin with Pre are executed before the default event is imported, and events that begin with post are executed after the default event is imported"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const InternalEvents = Object.freeze({\n  PreClear: 'pre-clear',\n  Clear: 'clear',\n  PostClear: 'post-clear',\n\n  PreCreate: 'pre-create',\n  PostCreate: 'post-create',\n});\n")),(0,o.kt)("p",null,"A clear (including pre-clear, post-clear) event sends a cleared object with the value of the event."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'import { InternalEvents } from "cheeket";\n\ncontainer.on(InternalEvents.PostClear, async (value) => {\n  if (value === loggerFactory.get(container)) {\n    // TODO\n  }\n});\n')),(0,o.kt)("p",null,"A create (representing pre-create, post-create) event sends the context used when creating with the value of the event. The reason why there is no create event is because the create process is handled by the factory."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"container.on(InternalEvents.PostCreate, async (context) => {\n  if (context.request !== ChatbotToken) {\n    return;\n  }\n\n  const strategies = await context.resolve(StrategiesToken);\n  strategies.forEach((stratege) => {\n    (context.response as ChatBot).register(stratege);\n  });\n});\n")),(0,o.kt)("p",null,"A create (representing pre-create, post-create) event sends the context used when creating with the value of the event. The reason why there is no create event is because the create process is handled by the factory."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"container.on(InternalEvents.PostCreate, async (context) => {\n  if (context.request !== ChatbotToken) {\n    return;\n  }\n\n  const strategies = await context.resolve(StrategiesToken);\n  strategies.forEach((stratege) => {\n    (context.response as ChatBot).register(stratege);\n  });\n});\n")),(0,o.kt)("p",null,"You can resolve the appropriate event emitter and send the event to other middleware or to the objects you are subscribed to."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'import { InternalEvents } from "cheeket";\n\nconst eventEmitter = await container.resolve(InternalEvents.AsyncEventEmitter);\n// eventEmitter === container\n')))}h.isMDXComponent=!0}}]);